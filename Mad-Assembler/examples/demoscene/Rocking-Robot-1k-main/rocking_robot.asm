
	org $80
position	.ds 1
	run code
	org $2000
song_data
        	;ins 'mlat.9st' ;following data is the contents of mlat.9st:
group0	dta $00,$78,$78,$78,$78,$78,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$78,$78,$78,$78,$78,$00,$78,$78,$78,$78,$78
	dta $00,$78,$78,$78,$78,$78,$00,$78,$78,$78,$78,$78
	dta $00,$50,$50,$50,$50,$50,$00,$78,$78,$78,$78,$78
	dta $00,$5A,$5A,$5A,$5A,$5A,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$50,$50,$50,$50,$50,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$50,$50,$50,$50,$50,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$50,$50,$00,$4B,$4B,$00,$50,$50,$50,$50,$50
	dta $00,$78,$78,$78,$78,$78,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$78,$78,$78,$78,$78,$00,$78,$78,$78,$78,$78
	dta $00,$78,$78,$78,$78,$78,$00,$78,$78,$78,$78,$78
	dta $00,$50,$50,$50,$50,$50,$00,$78,$78,$78,$78,$78
	dta $00,$50,$50,$50,$50,$50,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$50,$50,$50,$50,$50,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$43,$43,$43,$43,$43,$00,$4B,$4B,$4B,$4B,$4B
	dta $00,$4B,$4B,$00,$50,$50,$00,$4B,$4B,$4B,$4B,$4B
group1	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A1,$A1,$A0,$A0,$A0,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A1,$A1,$A0,$A0,$A0
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A2,$A1,$A1,$A1,$A1,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $81,$AF,$A8,$81,$AF,$A8,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A1,$A1,$A0,$A0,$A0,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A1,$A1,$A0,$A0,$A0
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A2,$A1,$A1,$A1,$A1,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $81,$AF,$A8,$80,$A2,$A1,$81,$AC,$A6,$A1,$A1,$A1
group2	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
	dta $7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F,$7F
group3	dta $C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4
	dta $C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4
	dta $C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4
	dta $C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3
	dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C2,$C2,$C2,$C2
	dta $C2,$C2,$C2,$C2,$C2,$C2,$C2,$C2,$C2,$C2,$C2,$C2
group4	dta $00,$76,$78,$78,$78,$78,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$76,$78,$78,$78,$78,$00,$76,$78,$78,$78,$78
	dta $00,$76,$78,$78,$78,$78,$00,$76,$78,$78,$78,$78
	dta $00,$4E,$50,$50,$50,$50,$00,$76,$78,$78,$78,$78
	dta $00,$58,$5A,$5A,$5A,$5A,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$4E,$50,$50,$50,$50,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$4E,$50,$50,$50,$50,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$4E,$50,$00,$49,$4B,$00,$4E,$50,$50,$50,$50
	dta $00,$76,$78,$78,$78,$78,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$76,$78,$78,$78,$78,$00,$76,$78,$78,$78,$78
	dta $00,$76,$78,$78,$78,$78,$00,$76,$78,$78,$78,$78
	dta $00,$4E,$50,$50,$50,$50,$00,$76,$78,$78,$78,$78
	dta $00,$4E,$50,$50,$50,$50,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$4E,$50,$50,$50,$50,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$41,$43,$43,$43,$43,$00,$49,$4B,$4B,$4B,$4B
	dta $00,$49,$4B,$00,$4E,$50,$00,$49,$4B,$4B,$4B,$4B
group5	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A1,$A1,$A0,$A0,$A0,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A1,$A1,$A0,$A0,$A0
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A2,$A1,$A1,$A1,$A1,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $81,$AF,$A8,$81,$AF,$A8,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A1,$A1,$A0,$A0,$A0,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A1,$A1,$A0,$A0,$A0
	dta $80,$A4,$A2,$A2,$A2,$A2,$81,$AF,$A8,$A6,$A6,$A6
	dta $80,$A2,$A1,$A1,$A1,$A1,$80,$A4,$A2,$A2,$A2,$A2
	dta $81,$AF,$A8,$A6,$A6,$A6,$80,$A2,$A1,$A1,$A1,$A1
	dta $81,$AF,$A8,$80,$A2,$A1,$81,$AC,$A6,$A1,$A1,$A1
group6	dta $11,$D0,$E0,$F0,$F8,$04,$00,$01,$02,$00,$11,$11
	dta $11,$11,$11,$11,$11,$11,$00,$01,$02,$00,$11,$11
	dta $11,$D0,$E0,$F0,$F8,$04,$02,$00,$01,$00,$00,$00
	dta $11,$11,$11,$11,$11,$11,$00,$01,$02,$00,$01,$02
	dta $11,$D0,$E0,$F0,$F8,$04,$02,$00,$01,$00,$00,$00
	dta $11,$11,$11,$11,$11,$11,$02,$00,$01,$00,$00,$00
	dta $11,$D0,$E0,$F0,$F8,$04,$02,$00,$01,$00,$00,$00
	dta $11,$11,$11,$11,$11,$11,$02,$00,$01,$00,$00,$00
	dta $11,$D0,$E0,$F0,$F8,$04,$00,$01,$02,$00,$11,$11
	dta $11,$11,$11,$11,$11,$11,$00,$01,$02,$00,$11,$11
	dta $11,$D0,$E0,$F0,$F8,$04,$02,$00,$01,$00,$00,$00
	dta $11,$11,$11,$11,$11,$11,$00,$01,$02,$00,$01,$02
	dta $11,$D0,$E0,$F0,$F8,$04,$02,$00,$01,$00,$00,$00
	dta $11,$11,$11,$11,$11,$11,$02,$00,$01,$00,$00,$00
	dta $11,$D0,$E0,$F0,$F8,$04,$02,$00,$01,$00,$00,$00
	dta $11,$11,$11,$11,$11,$11,$02,$00,$01,$00,$00,$00
group7	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$83,$82,$81,$81,$A1
	dta $05,$86,$04,$02,$00,$00,$8A,$86,$84,$82,$81,$A1
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$84,$82,$01,$00,$00
	dta $05,$86,$04,$02,$00,$00,$88,$85,$83,$8A,$86,$84
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$84,$82,$01,$00,$00
	dta $05,$86,$04,$02,$00,$00,$8A,$87,$83,$01,$00,$00
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$84,$82,$01,$00,$00
	dta $05,$86,$04,$02,$00,$00,$88,$86,$82,$01,$00,$00
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$83,$82,$81,$81,$A1
	dta $05,$86,$04,$02,$00,$00,$8A,$86,$84,$82,$81,$A1
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$84,$82,$01,$00,$00
	dta $05,$86,$04,$02,$00,$00,$88,$85,$83,$8A,$86,$84
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$84,$82,$01,$00,$00
	dta $05,$86,$04,$02,$00,$00,$8A,$87,$83,$01,$00,$00
	dta $0F,$AF,$AD,$AB,$A7,$04,$85,$84,$82,$01,$00,$00
	dta $05,$86,$04,$02,$00,$00,$88,$86,$82,$01,$00,$00
group8	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $00,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
	dta $00,$04,$04,$00,$00,$00,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$00,$00,$00
	dta $00,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
	dta $00,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $00,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
	dta $00,$04,$04,$00,$00,$00,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$00,$00,$00
	dta $00,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
	dta $00,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$04,$04,$04,$00,$04,$04,$04,$04,$04
	dta $04,$04,$04,$00,$04,$04,$04,$04,$04,$04,$04,$04

song_end

	.align $100,0

gfx	ins "krp5b.dat"
:4	dta 0

code	mwa #dl $230
	mva #$80 $26f 
	mva #32+1 559
	ldy #3
	sty $d20f	;init pokey
	ldx #7
@	lda clrs,x
	sta $2c0,x
	dex 
	bpl @-

	jmp music_start
cnt	dta 38	

ud	dta $10,$20,$40,$60,$70,$70,$80,$80
	dta $80,$80,$70,$70,$50,$30,$10,$10
clrs	dta $0e,$0c,$0a,$78,$74,$04,$7a,$00

dl	dta $70,$70,$70
.rept 38,#
?r = #
:4	dta $4f+$10,a(gfx+?r*32)
.endr
	dta $41,a(dl)

;music player
music_start
	mva #0 position
	sta $4d	;attract
loop	lda:cmp:req 20
	and #$1f
	lsr @
	tax
	lda ud,x
	sta dl
:4	lsr @
	and #$fe
	sta $d404 ;hscrol
	
	ldx position
:9	mva song_data+192*#,x $d200+#  ;due to some small bug #193 required for binary file mlat.9st
	inc position
	lda position
	cmp #192
	bne loop
	beq music_start

